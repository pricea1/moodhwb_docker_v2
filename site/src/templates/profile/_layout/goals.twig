{% extends "_layout" %}

{% block content %}

<div id="profileDashboardContainer" class="profile-goals-container">

	<div id="profileDashboardHeadingContainer" class="profile-dashboard-heading-container">

		<div class="row">

			<div  class="small-12 column">

				<div id="profileDashboardHeading" class="profile-dashboard-heading profile-dashboard--no-arrow">
					<h2 class="profile-dashboard-heading__text">{{ entry.heading }}</h2>
				</div>

			</div>
		</div>

		<div id="profileDashboardDetails" class="profile-dashboard-details ">
			<div class="profile-goal__details-container">

				<div class="row">

						<div class="profile-goals__new-container">
							<form id="profileGoalForm" class="profile-goals-form" method="post" accept-charset="UTF-8">
							{{ csrfInput() }}

							    <input type="hidden" name="action" value="profiler/goal/addGoal">

								<div  class="small-12 medium-4 column">

								    <input id="profileGoalActivity" name="activity" class="	radius profile-goals-input" type="text" placeholder="{{ "Enter a title"|t }}">
								</div>
								<div  class="small-12 medium-4 column">

									<select id="profileGoalTimesPerWeek" name="timesPerWeek" class="radius profile-goals-select">
										<option value="1">{{ "How many times per week" | t}}</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
										<option value="6">6</option>
										<option value="7">7</option>
									</select>
								</div>

								<div  class="small-12 medium-4 column">

									<button type="submit" class="button radius round profile-goals-add-button">{{ 'Add goal'|t }}</button>
								</div>
						    </form>
						</div>

				</div>
			</div>
		</div>
	</div>


	{% set goalList = craft.profiler.getAllGoals() %}

	<div class="text-center profile-goals__welcome-msg {% if goalList | length != 0 %}hide{% endif %}">
		<div class="row">
			<div class="small-12 column">
					{{ entry.body }}
			</div>
		</div>


			<div class="row">
				<div class="small-12 medium-4 column text-center">
							<img class="profile-empty-list-image" srcset="/resources/images/weeklygoals-1.png" alt="Enter activity image">
							<div class="profile-empty-list__number">
								1.
							</div>
							<div class="profile-empty-list__text">
								{{ "weeklygoals-step1" | t }}
							</div>
				</div>
				<div class="small-12 medium-4 column text-center">
							<img class="profile-empty-list-image" srcset="/resources/images/weeklygoals-2.png" alt="Enter frequency of activity image">
							<div class="profile-empty-list__number">
								2.
							</div>
							<div class="profile-empty-list__text">
								{{ "weeklygoals-step2" | t }}
							</div>
				</div>
				<div class="small-12 medium-4  end column text-center">
							<img class="profile-empty-list-image" srcset="/resources/images/weeklygoals-3.png" alt="Add activity to list image">
							<div class="profile-empty-list__number">
								3.
							</div>
							<div class="profile-empty-list__text">
								{{ "weeklygoals-step3" | t }}
							</div>
				</div>
			</div>
		</div>



	<div class="profile-goals__list-container {% if goalList | length == 0 %}hide{% endif %}">

		<div class="profile-goals__todo-list ">

			<ul class="profile-goals__list profile-goals__list--todo ">
				{% for goal in goalList %}

					<li data-goal-id="{{ goal.id }}" class="profile-goals__list-item" data-status="{{ goal.status }}">

						<div class="row">
							<div class="small-12 column">
								<span class="icon-circle profile-goals__times-completed">{% if goal.status == "completed" %}{{ goal.timesPerWeek }}{% else %}{{ goal.timesPerWeek - goal.timesCompleted }}{% endif %}</span><span class="profile-goals__activity" id="profileGoalActivity">{{ goal.activity}}</span>

							<a href="{{ actionUrl('profiler/goal/doneActivity', { goalId: goal.id }) }}" class="profile-goal__action-link" data-goal-status="{{ goal.status }}" data-times-per-week="{{ goal.timesPerWeek }}" data-times-completed="{{ goal.timesCompleted }}" data-goal-action="complete"><span class="show-for-sr">{{ 'Complete activity'|t }}</span><span class="ss-icon ss-icon-circle ss-check"></span></a>

							<a href="{{ actionUrl('profiler/goal/resetActivity', { goalId: goal.id }) }}" class="btn btn-default btn-sm profile-goal__action-link" data-times-per-week="{{ goal.timesPerWeek }}" data-goal-action="undo"><span class="show-for-sr">{{ 'Reset activity'|t }}</span><span class="ss-icon ss-icon-circle ss-replay"></span></a>

							<a href="{{ actionUrl('profiler/goal/deleteGoal', { goalId: goal.id }) }}" class="profile-goal__action-link" data-goal-action="delete"><span class="show-for-sr">{{ 'Delete activity'|t }}</span><span class="ss-icon ss-icon-circle ss-delete"></span></a>


						</div>
					</div>

					</li>
				{% endfor %}
			</ul>
		</div>

	</div>


</div>

{% endblock %}

{% block jsBlock %}
	<script>
		$(document).ready(function(){
			opad.initJsModule(['profile-goals']);
		});
	</script>
{% endblock %}
